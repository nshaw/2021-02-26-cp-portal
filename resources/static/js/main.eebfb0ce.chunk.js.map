{"version":3,"sources":["auth/KeycloakContext.js","components/pagination/PaginationContext.js","components/__types__/keycloak.js","components/__types__/ref.js","auth/KeycloakViews.js","components/common/ConfirmationDialogTrigger.js","components/pagination/withPagination.js","components/pagination/TablePaginationActions.js","components/pagination/PaginationWrapper.js","components/__types__/ticket.js","components/filters/utils.js","components/__types__/filter.js","components/filters/Filter.js","components/filters/FiltersContainer.js","components/TicketTable.js","components/common/Notification.js","api/helpers.js","api/tickets.js","custom-elements/widgetEventTypes.js","state/filter.types.js","state/ticket.types.js","state/ticket.reducer.js","components/TicketTableContainer.js","auth/withKeycloak.js","i18n/locales/index.js","i18n/i18next.js","i18n/setLocale.js","i18n/constants.js","helpers/widgetEvents.js","custom-elements/TicketTableElement.js"],"names":["KeycloakContext","React","createContext","itemsPerPageOptions","initialState","currentPage","itemsPerPage","length","PaginationContext","pagination","PaginationProvider","props","initialItemsPerPage","paginationMode","state","onChangeItemsPerPage","bind","onChangeCurrentPage","value","target","parseInt","this","setState","newPage","children","Provider","Component","defaultProps","PropTypes","shape","initialized","bool","authenticated","oneOfType","func","current","elementType","AuthenticatedView","keycloak","UnauthenticatedView","ConfirmationDialogTrigger","open","handleOpen","discard","confirm","action","onCloseDialog","handleClose","DISCARD","CONFIRM","dialog","title","description","confirmLabel","discardLabel","Renderer","onClick","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","autoFocus","color","PureComponent","withPagination","WrappedComponent","WithPaginationComponent","renderWrappedComponent","context","forwardedRef","rest","ref","Consumer","forwardRef","withTranslation","withStyles","root","flexShrink","marginLeft","classes","count","page","rowsPerPage","onChangePage","t","className","IconButton","disabled","aria-label","Math","ceil","max","number","systemId","string","type","priority","status","createDate","updateDate","items","dataLength","next","hasMore","loader","TablePagination","component","rowsPerPageOptions","SelectProps","native","onChangeRowsPerPage","ActionsComponent","TablePaginationActions","FILTER_TYPE_NO_VALUE_SPEC","field","operator","DEFAULT_FILTER_TYPES","STRING_FILTER_TYPES","DATE_NUMBER_FILTER_TYPES","STRING_FIELDS","DATE_FIELDS","NUMBER_FIELDS","getFilterQuery","filters","filter","f","reduce","acc","encodeURIComponent","join","formControl","minWidth","width","icon","withTheme","update","remove","filterId","filterOperators","includes","handleChange","event","name","Grid","container","item","xs","FormControl","InputLabel","Select","labelId","onChange","map","key","TextField","margin","FiltersContainer","applyFilter","clear","add","error","hasFilters","Paper","variant","button","index","filterKey","errors","filt","flexGrow","padding","marginRight","paper","textAlign","height","TicketTable","onSelect","i18n","Actions","tableRows","TableRow","hover","rowRoot","TableCell","Date","toLocaleString","language","Table","tableRoot","stickyHeader","TableHead","TableBody","noItems","marginTop","cursor","overflow","textOverflow","whiteSpace","statusIcon","success","CheckCircleIcon","ErrorIcon","info","InfoIcon","autoHideDurations","Notification","passedStatus","message","isOpen","INFO","Icon","autoHideDuration","messageTemplate","clsx","iconStatus","Snackbar","SnackbarContent","SUCCESS","ERROR","theme","display","alignItems","fontSize","opacity","spacing","backgroundColor","green","palette","dark","primary","main","getDefaultOptions","headers","Headers","Authorization","window","entando","token","getUrl","url","hasQuery","parameters","request","options","a","fetch","response","has","get","tickets","json","Promise","reject","Error","statusText","apiTicketsDelete","serviceUrl","method","apiTicketsGet","mode","filterQuery","paginationQuery","INPUT_EVENT_TYPES","formUpdate","formCreate","formDelete","OUTPUT_EVENT_TYPES","ADD_FILTER","UPDATE_FILTER","DELETE_FILTER","CLEAR_FILTERS","READ_ALL","CLEAR_ERRORS","CLEAR_ITEMS","CREATE","UPDATE","DELETE","notificationMessage","notificationStatus","loading","reducer","payload","values","i","findIndex","TicketTableContainer","handleDelete","handleError","closeNotification","fetchData","updateFilter","addFilter","removeFilter","clearFilters","applyFilters","prevProps","changedAuth","changedPagination","afterSetState","prevState","requestParameters","ticketCount","dispatch","err","onError","onDelete","onAdd","deleteLabel","Fab","fab","tableWrapper","handleConfirmationDialogAction","withKeycloak","WithKeycloakComponent","float","overflowX","overflowY","undefined","withRef","en","resources","Object","keys","locales","lang","i18next","locale","defaultLocale","use","initReactI18next","init","defaultNs","interpolation","escapeValue","lng","fallbackLng","react","useSuspense","setI18nextLocale","createWidgetEventPublisher","eventType","eventId","widgetEvent","CustomEvent","detail","dispatchEvent","publishWidgetEvent","getKeycloakInstance","ATTRIBUTES","hidden","disableDefaultEventHandler","TicketTableElement","reactRootRef","createRef","oldValue","newValue","onToggleDisableDefaultEvent","render","document","createElement","mountPoint","appendChild","eventHandler","shadowRoot","attachShadow","jss","create","jssPreset","insertionPoint","muiTheme","createMuiTheme","MuiDialog","unsubscribeFromKeycloakEvent","addEventListener","removeEventListener","retargetEvents","unsubscribeFromWidgetEvents","evt","meta","widgetEventToFSA","widgetEvents","disableEventHandler","getAttribute","defaultEventHandlerDisabled","defaultWidgetEventHandler","forEach","setLocale","ReactDOM","StylesProvider","ThemeProvider","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.eebfb0ce.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst KeycloakContext = React.createContext(null);\r\n\r\nexport default KeycloakContext;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const itemsPerPageOptions = [5, 10, 25];\r\n\r\nconst initialState = {\r\n  currentPage: 0,\r\n  itemsPerPage: itemsPerPageOptions[itemsPerPageOptions.length - 1],\r\n};\r\n\r\nexport const PaginationContext = React.createContext({ pagination: initialState });\r\n\r\nexport class PaginationProvider extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const initialItemsPerPage =\r\n      props.paginationMode === 'pagination'\r\n        ? itemsPerPageOptions[0]\r\n        : itemsPerPageOptions[itemsPerPageOptions.length - 1];\r\n\r\n    this.state = {\r\n      pagination: {\r\n        ...initialState,\r\n        itemsPerPage: initialItemsPerPage,\r\n      },\r\n    };\r\n\r\n    this.onChangeItemsPerPage = this.onChangeItemsPerPage.bind(this);\r\n    this.onChangeCurrentPage = this.onChangeCurrentPage.bind(this);\r\n  }\r\n\r\n  onChangeItemsPerPage({ target: { value } }) {\r\n    const itemsPerPage = parseInt(value, 10);\r\n    const currentPage = 0;\r\n\r\n    this.setState(state => ({\r\n      ...state,\r\n      pagination: { ...state.pagination, itemsPerPage, currentPage },\r\n    }));\r\n  }\r\n\r\n  onChangeCurrentPage(newPage) {\r\n    const currentPage = parseInt(newPage, 10);\r\n    this.setState(state => ({\r\n      ...state,\r\n      pagination: { ...state.pagination, currentPage },\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    const { pagination } = this.state;\r\n    const { children } = this.props;\r\n    return (\r\n      <PaginationContext.Provider\r\n        value={{\r\n          ...pagination,\r\n          onChangeCurrentPage: this.onChangeCurrentPage,\r\n          onChangeItemsPerPage: this.onChangeItemsPerPage,\r\n        }}\r\n      >\r\n        {children}\r\n      </PaginationContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nPaginationProvider.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  paginationMode: PropTypes.string,\r\n};\r\n\r\nPaginationProvider.defaultProps = {\r\n  paginationMode: '',\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nconst keycloakType = PropTypes.shape({\r\n  initialized: PropTypes.bool,\r\n  authenticated: PropTypes.bool,\r\n});\r\n\r\nexport default keycloakType;\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.oneOfType([\r\n  PropTypes.func,\r\n  PropTypes.shape({ current: PropTypes.elementType }),\r\n  PropTypes.shape(null),\r\n]);\r\n","export const AuthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return authenticated ? children : null;\r\n};\r\n\r\nexport const UnauthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return !authenticated ? children : null;\r\n};\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default class ConfirmationDialogTrigger extends PureComponent {\r\n  static CONFIRM = 'CONFIRM';\r\n\r\n  static DISCARD = 'DISCARD';\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { open: false };\r\n    this.handleOpen = this.handleOpen.bind(this);\r\n    this.discard = this.discard.bind(this);\r\n    this.confirm = this.confirm.bind(this);\r\n  }\r\n\r\n  handleOpen() {\r\n    this.setState(() => ({\r\n      open: true,\r\n    }));\r\n  }\r\n\r\n  handleClose(action) {\r\n    const { onCloseDialog } = this.props;\r\n    this.setState(() => ({\r\n      open: false,\r\n    }));\r\n    onCloseDialog(action);\r\n  }\r\n\r\n  discard() {\r\n    this.handleClose(ConfirmationDialogTrigger.DISCARD);\r\n  }\r\n\r\n  confirm() {\r\n    this.handleClose(ConfirmationDialogTrigger.CONFIRM);\r\n  }\r\n\r\n  render() {\r\n    const { open } = this.state;\r\n    const {\r\n      dialog: { title, description, confirmLabel, discardLabel },\r\n      Renderer,\r\n    } = this.props;\r\n    return (\r\n      <div>\r\n        <Renderer onClick={this.handleOpen} />\r\n        <Dialog\r\n          open={open}\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"confirmation-dialog-title\"\r\n          aria-describedby=\"confirmation-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"confirmation-dialog-title\">{title}</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"confirmation-dialog-description\">\r\n              {description}\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.discard} autoFocus>\r\n              {discardLabel}\r\n            </Button>\r\n            <Button onClick={this.confirm} color=\"primary\">\r\n              {confirmLabel}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nConfirmationDialogTrigger.propTypes = {\r\n  dialog: PropTypes.shape({\r\n    title: PropTypes.string.isRequired,\r\n    description: PropTypes.string.isRequired,\r\n    confirmLabel: PropTypes.string.isRequired,\r\n    discardLabel: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  onCloseDialog: PropTypes.func.isRequired,\r\n  Renderer: PropTypes.oneOfType([PropTypes.string, PropTypes.func]).isRequired,\r\n};\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { forwardRef, Component } from 'react';\r\nimport refType from 'components/__types__/ref';\r\nimport { PaginationContext } from 'components/pagination/PaginationContext';\r\n\r\nexport default function withPagination(WrappedComponent) {\r\n  class WithPaginationComponent extends Component {\r\n    renderWrappedComponent = context => {\r\n      const { forwardedRef, ...rest } = this.props;\r\n      return <WrappedComponent {...rest} ref={forwardedRef} pagination={context} />;\r\n    };\r\n\r\n    render() {\r\n      return <PaginationContext.Consumer>{this.renderWrappedComponent}</PaginationContext.Consumer>;\r\n    }\r\n  }\r\n\r\n  WithPaginationComponent.propTypes = {\r\n    forwardedRef: refType,\r\n  };\r\n\r\n  WithPaginationComponent.defaultProps = {\r\n    forwardedRef: null,\r\n  };\r\n\r\n  return forwardRef((props, ref) => <WithPaginationComponent {...props} forwardedRef={ref} />);\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\r\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\r\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\r\nimport LastPageIcon from '@material-ui/icons/LastPage';\r\n\r\nconst styles = {\r\n  root: {\r\n    flexShrink: 0,\r\n    marginLeft: '5px',\r\n  },\r\n};\r\n\r\nconst TablePaginationActions = ({ classes, count, page, rowsPerPage, onChangePage, t }) => {\r\n  const handleFirstPageButtonClick = () => {\r\n    onChangePage(0);\r\n  };\r\n\r\n  const handleBackButtonClick = () => {\r\n    onChangePage(page - 1);\r\n  };\r\n\r\n  const handleNextButtonClick = () => {\r\n    onChangePage(page + 1);\r\n  };\r\n\r\n  const handleLastPageButtonClick = () => {\r\n    onChangePage(Math.max(0, Math.ceil(count / rowsPerPage) - 1));\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <IconButton\r\n        onClick={handleFirstPageButtonClick}\r\n        disabled={page === 0}\r\n        aria-label={t('pagination.ariaLabels.firstPage')}\r\n      >\r\n        <FirstPageIcon />\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleBackButtonClick}\r\n        disabled={page === 0}\r\n        aria-label={t('pagination.ariaLabels.previousPage')}\r\n      >\r\n        <KeyboardArrowLeft />\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleNextButtonClick}\r\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n        aria-label={t('pagination.ariaLabels.nextPage')}\r\n      >\r\n        <KeyboardArrowRight />\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleLastPageButtonClick}\r\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n        aria-label={t('pagination.ariaLabels.lastPage')}\r\n      >\r\n        <LastPageIcon />\r\n      </IconButton>\r\n    </div>\r\n  );\r\n};\r\n\r\nTablePaginationActions.propTypes = {\r\n  onChangePage: PropTypes.func.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n  rowsPerPage: PropTypes.number.isRequired,\r\n  count: PropTypes.number.isRequired,\r\n  classes: PropTypes.shape({\r\n    root: PropTypes.string,\r\n  }).isRequired,\r\n  t: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withTranslation()(withStyles(styles)(TablePaginationActions));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { withTranslation } from 'react-i18next';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n\r\nimport { itemsPerPageOptions } from 'components/pagination/PaginationContext';\r\nimport withPagination from 'components/pagination/withPagination';\r\nimport TablePaginationActions from 'components/pagination/TablePaginationActions';\r\n\r\nimport ticketType from 'components/__types__/ticket';\r\n\r\nconst PaginationWrapper = ({ children, pagination, paginationMode, items, count, t }) => {\r\n  if (paginationMode === 'infinite-scroll') {\r\n    return (\r\n      <InfiniteScroll\r\n        dataLength={items.length}\r\n        next={() => pagination.onChangeCurrentPage(pagination.currentPage + 1)}\r\n        hasMore={items.length < count}\r\n        loader={<div>{t('common.loadingMore')}</div>}\r\n      >\r\n        {children}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n  if (paginationMode === 'pagination') {\r\n    return (\r\n      <>\r\n        {children}\r\n        {count > 0 && (\r\n          <TablePagination\r\n            component=\"div\"\r\n            rowsPerPageOptions={itemsPerPageOptions}\r\n            count={count}\r\n            rowsPerPage={pagination.itemsPerPage}\r\n            page={pagination.currentPage}\r\n            SelectProps={{\r\n              native: true,\r\n            }}\r\n            onChangePage={pagination.onChangeCurrentPage}\r\n            onChangeRowsPerPage={pagination.onChangeItemsPerPage}\r\n            ActionsComponent={TablePaginationActions}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n  return children;\r\n};\r\n\r\nPaginationWrapper.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  pagination: PropTypes.shape({\r\n    itemsPerPage: PropTypes.number,\r\n    currentPage: PropTypes.number,\r\n    onChangeItemsPerPage: PropTypes.func.isRequired,\r\n    onChangeCurrentPage: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n  paginationMode: PropTypes.string.isRequired,\r\n  items: PropTypes.arrayOf(ticketType).isRequired,\r\n  count: PropTypes.number.isRequired,\r\n  t: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withTranslation()(withPagination(PaginationWrapper));\r\n","import PropTypes from 'prop-types';\r\n\r\nconst ticketType = PropTypes.shape({\r\n  id: PropTypes.number,\r\n\r\n  systemId: PropTypes.string,\r\n  type: PropTypes.string,\r\n  description: PropTypes.string,\r\n  priority: PropTypes.string,\r\n  status: PropTypes.string,\r\n  createDate: PropTypes.string,\r\n  updateDate: PropTypes.string,\r\n});\r\n\r\nexport default ticketType;\r\n","export const FILTER_TYPE_NO_VALUE_SPEC = ['specified', 'unspecified'];\r\n\r\nconst DEFAULT_FILTER_TYPES = ['equals', 'in', ...FILTER_TYPE_NO_VALUE_SPEC];\r\nconst STRING_FILTER_TYPES = ['contains'];\r\nconst DATE_NUMBER_FILTER_TYPES = [\r\n  { value: 'greaterThan', title: '>' },\r\n  { value: 'lessThan', title: '<' },\r\n  { value: 'greaterOrEqualThan', title: '>=' },\r\n  { value: 'lessOrEqualThan', title: '<=' },\r\n];\r\n\r\nconst STRING_FIELDS = ['systemId', 'type', 'description', 'priority', 'status'];\r\nconst DATE_FIELDS = ['createDate', 'updateDate'];\r\nconst NUMBER_FIELDS = [];\r\n\r\nexport const getFieldFilterTypes = field => {\r\n  return [\r\n    ...DEFAULT_FILTER_TYPES,\r\n    ...(STRING_FIELDS.includes(field) ? STRING_FILTER_TYPES : []),\r\n    ...(DATE_FIELDS.includes(field) ? DATE_NUMBER_FILTER_TYPES : []),\r\n    ...(NUMBER_FIELDS.includes(field) ? DATE_NUMBER_FILTER_TYPES : []),\r\n  ];\r\n};\r\n\r\nexport const getFilterQuery = (filters = []) => {\r\n  if (filters.length) {\r\n    return filters\r\n      .filter(f => f.field && f.operator)\r\n      .reduce((acc, f) => {\r\n        switch (f.operator) {\r\n          case 'specified':\r\n            return [...acc, `${encodeURIComponent(`${f.field}.specified`)}=true`];\r\n          case 'unspecified':\r\n            return [...acc, `${encodeURIComponent(`${f.field}.specified`)}=false`];\r\n          default:\r\n        }\r\n        return [\r\n          ...acc,\r\n          `${encodeURIComponent(`${f.field}.${f.operator}`)}=${encodeURIComponent(f.value)}`,\r\n        ];\r\n      }, [])\r\n      .join('&');\r\n  }\r\n  return '';\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nconst filterType = PropTypes.shape({\r\n  field: PropTypes.string,\r\n  operator: PropTypes.string,\r\n  value: PropTypes.string,\r\n});\r\n\r\nexport default filterType;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { withTranslation } from 'react-i18next';\r\nimport Select from '@material-ui/core/Select';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteForever from '@material-ui/icons/DeleteForever';\r\n\r\nimport filterType from 'components/__types__/filter';\r\nimport { getFieldFilterTypes, FILTER_TYPE_NO_VALUE_SPEC } from 'components/filters/utils';\r\n\r\nconst styles = () => ({\r\n  formControl: {\r\n    minWidth: 120,\r\n    width: '90%',\r\n  },\r\n  icon: {\r\n    color: 'rgba(0, 0, 0, 0.54)',\r\n  },\r\n});\r\n\r\nconst Filter = ({ filter, t, update, remove, filterId, classes }) => {\r\n  const filterOperators = getFieldFilterTypes(filter.field);\r\n\r\n  const handleChange = event => {\r\n    update(filterId, { [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const handleRemoveClick = () => {\r\n    remove(filterId);\r\n  };\r\n\r\n  return (\r\n    <Grid container>\r\n      <Grid item xs={5}>\r\n        <FormControl className={classes.formControl}>\r\n          <InputLabel id={`${filterId}-field-label`}>{t('filters.field')}</InputLabel>\r\n          <Select\r\n            native\r\n            labelId={`${filterId}-field-label`}\r\n            id={`${filterId}-field`}\r\n            name=\"field\"\r\n            value={filter.field}\r\n            onChange={handleChange}\r\n          >\r\n            <option value=\"\" />\r\n            <option value=\"systemId\">{t('entities.ticket.systemId')}</option>\r\n            <option value=\"type\">{t('entities.ticket.type')}</option>\r\n            <option value=\"description\">{t('entities.ticket.description')}</option>\r\n            <option value=\"priority\">{t('entities.ticket.priority')}</option>\r\n            <option value=\"status\">{t('entities.ticket.status')}</option>\r\n            <option value=\"createDate\">{t('entities.ticket.createDate')}</option>\r\n            <option value=\"updateDate\">{t('entities.ticket.updateDate')}</option>\r\n          </Select>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        {!!filter.field && (\r\n          <FormControl className={classes.formControl}>\r\n            <InputLabel id={`${filterId}-operator-label`}>{t('filters.operator')}</InputLabel>\r\n            <Select\r\n              native\r\n              labelId={`${filterId}-operator-label`}\r\n              id={`${filterId}-operator`}\r\n              name=\"operator\"\r\n              value={filter.operator}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"\" />\r\n              {filterOperators.map(operator => {\r\n                if (typeof operator !== 'string') {\r\n                  return (\r\n                    <option key={operator.value} value={operator.value}>\r\n                      {operator.title}\r\n                    </option>\r\n                  );\r\n                }\r\n                return (\r\n                  <option key={operator} value={operator}>\r\n                    {t(`filters.operators.${operator}`)}\r\n                  </option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        {!!filter.operator && !FILTER_TYPE_NO_VALUE_SPEC.includes(filter.operator) && (\r\n          <FormControl className={classes.formControl}>\r\n            <TextField\r\n              disabled={!filter.field}\r\n              id=\"standard-required\"\r\n              name=\"value\"\r\n              value={filter.value}\r\n              onChange={handleChange}\r\n              margin=\"normal\"\r\n            />\r\n          </FormControl>\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={1}>\r\n        <IconButton aria-label=\"Remove filter\" className={classes.icon} onClick={handleRemoveClick}>\r\n          <DeleteForever />\r\n        </IconButton>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nFilter.propTypes = {\r\n  classes: PropTypes.shape({\r\n    formControl: PropTypes.string,\r\n    icon: PropTypes.string,\r\n  }).isRequired,\r\n  t: PropTypes.func.isRequired,\r\n  update: PropTypes.func.isRequired,\r\n  remove: PropTypes.func.isRequired,\r\n  filter: filterType.isRequired,\r\n  filterId: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(withTranslation()(Filter));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Filter from 'components/filters/Filter';\r\nimport filterType from 'components/__types__/filter';\r\nimport { FILTER_TYPE_NO_VALUE_SPEC } from 'components/filters/utils';\r\n\r\nconst styles = {\r\n  root: {\r\n    flexGrow: 1,\r\n    padding: '5px',\r\n    marginRight: '65px',\r\n  },\r\n  paper: {\r\n    padding: '5px',\r\n    textAlign: 'center',\r\n    height: '30px',\r\n  },\r\n  icon: {\r\n    padding: '5px',\r\n    color: '#555555',\r\n    '&:hover': {\r\n      color: '#000000',\r\n    },\r\n  },\r\n  button: {\r\n    margin: '5px',\r\n  },\r\n};\r\n\r\nconst FiltersContainer = props => {\r\n  const { classes, filters, applyFilter, update, remove, clear, add, t, error } = props;\r\n\r\n  const hasFilters = filters.length > 0;\r\n\r\n  const handleApplyFilter = () => {\r\n    const errors =\r\n      hasFilters &&\r\n      filters\r\n        .map(filt => {\r\n          if (filt.field && filt.operator && !FILTER_TYPE_NO_VALUE_SPEC.includes(filt.operator)) {\r\n            return filt.value ? '' : 'missing filter parameters';\r\n          }\r\n          return '';\r\n        })\r\n        .filter(f => !!f);\r\n    if (errors && errors.length > 0) {\r\n      error(errors[0]);\r\n    } else {\r\n      applyFilter();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <Button variant=\"contained\" className={classes.button} onClick={add}>\r\n        {t('filters.addFilter')}\r\n      </Button>\r\n      {hasFilters && (\r\n        <Button className={classes.button} onClick={clear}>\r\n          {t('filters.clearFilters')}\r\n        </Button>\r\n      )}\r\n      {filters.map((filter, index) => {\r\n        const filterKey = `${filter.field}${filter.operator}${index}`;\r\n        return (\r\n          <Filter\r\n            key={filterKey}\r\n            update={update}\r\n            remove={remove}\r\n            filterId={index}\r\n            filter={filter}\r\n          />\r\n        );\r\n      })}\r\n      {hasFilters && (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.button}\r\n          onClick={handleApplyFilter}\r\n        >\r\n          {t('filters.filter')}\r\n        </Button>\r\n      )}\r\n    </Paper>\r\n  );\r\n};\r\n\r\nFiltersContainer.propTypes = {\r\n  classes: PropTypes.shape().isRequired,\r\n  t: PropTypes.func.isRequired,\r\n  filters: PropTypes.arrayOf(filterType).isRequired,\r\n  applyFilter: PropTypes.func,\r\n  add: PropTypes.func,\r\n  update: PropTypes.func,\r\n  remove: PropTypes.func,\r\n  clear: PropTypes.func,\r\n  error: PropTypes.func,\r\n};\r\n\r\nFiltersContainer.defaultProps = {\r\n  applyFilter: () => {},\r\n  add: () => {},\r\n  update: () => {},\r\n  remove: () => {},\r\n  clear: () => {},\r\n  error: () => {},\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(FiltersContainer));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport ticketType from 'components/__types__/ticket';\r\n\r\nconst styles = {\r\n  tableRoot: {\r\n    marginTop: '10px',\r\n  },\r\n  rowRoot: {\r\n    cursor: 'pointer',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  noItems: {\r\n    margin: '15px',\r\n  },\r\n};\r\n\r\nconst TicketTable = ({ items, onSelect, classes, t, i18n, Actions }) => {\r\n  const tableRows = items.map(item => (\r\n    <TableRow hover className={classes.rowRoot} key={item.id} onClick={() => onSelect(item)}>\r\n      <TableCell>\r\n        <span>{item.systemId}</span>\r\n      </TableCell>\r\n      <TableCell>\r\n        <span>{item.type}</span>\r\n      </TableCell>\r\n      <TableCell>\r\n        <span>{item.description}</span>\r\n      </TableCell>\r\n      <TableCell>\r\n        <span>{item.priority}</span>\r\n      </TableCell>\r\n      <TableCell>\r\n        <span>{item.status}</span>\r\n      </TableCell>\r\n      <TableCell>\r\n        <span>{new Date(item.createDate).toLocaleString(i18n.language)}</span>\r\n      </TableCell>\r\n      <TableCell>\r\n        <span>{new Date(item.updateDate).toLocaleString(i18n.language)}</span>\r\n      </TableCell>\r\n      {Actions && (\r\n        <TableCell>\r\n          <Actions item={item} />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  ));\r\n\r\n  return items.length ? (\r\n    <Table className={classes.tableRoot} stickyHeader>\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell>\r\n            <span>{t('entities.ticket.systemId')}</span>\r\n          </TableCell>\r\n          <TableCell>\r\n            <span>{t('entities.ticket.type')}</span>\r\n          </TableCell>\r\n          <TableCell>\r\n            <span>{t('entities.ticket.description')}</span>\r\n          </TableCell>\r\n          <TableCell>\r\n            <span>{t('entities.ticket.priority')}</span>\r\n          </TableCell>\r\n          <TableCell>\r\n            <span>{t('entities.ticket.status')}</span>\r\n          </TableCell>\r\n          <TableCell>\r\n            <span>{t('entities.ticket.createDate')}</span>\r\n          </TableCell>\r\n          <TableCell>\r\n            <span>{t('entities.ticket.updateDate')}</span>\r\n          </TableCell>\r\n          {Actions && <TableCell />}\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>{tableRows}</TableBody>\r\n    </Table>\r\n  ) : (\r\n    <div className={classes.noItems}>{t('entities.ticket.noItems')}</div>\r\n  );\r\n};\r\n\r\nTicketTable.propTypes = {\r\n  items: PropTypes.arrayOf(ticketType).isRequired,\r\n  onSelect: PropTypes.func,\r\n  classes: PropTypes.shape({\r\n    rowRoot: PropTypes.string,\r\n    tableRoot: PropTypes.string,\r\n    noItems: PropTypes.string,\r\n  }).isRequired,\r\n  t: PropTypes.func.isRequired,\r\n  i18n: PropTypes.shape({ language: PropTypes.string }).isRequired,\r\n  Actions: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n};\r\n\r\nTicketTable.defaultProps = {\r\n  onSelect: () => {},\r\n  Actions: null,\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(TicketTable));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { Snackbar, SnackbarContent } from '@material-ui/core';\r\nimport { green } from '@material-ui/core/colors';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst styles = theme => ({\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n  iconStatus: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  success: {\r\n    backgroundColor: green[600],\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark,\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n});\r\n\r\nconst statusIcon = {\r\n  success: CheckCircleIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst autoHideDurations = {\r\n  success: 3000,\r\n  error: null,\r\n  info: 5000,\r\n};\r\n\r\nconst Notification = ({ className, classes, status: passedStatus, message, onClose }) => {\r\n  const isOpen = !!message;\r\n\r\n  const status = passedStatus || Notification.INFO;\r\n  const Icon = statusIcon[status];\r\n  const autoHideDuration = autoHideDurations[status];\r\n\r\n  const messageTemplate = (\r\n    <span className={classes.message}>\r\n      <Icon className={clsx(classes.icon, classes.iconStatus)} />\r\n      {message}\r\n    </span>\r\n  );\r\n\r\n  return (\r\n    <Snackbar open={isOpen} onClose={onClose} autoHideDuration={autoHideDuration}>\r\n      <SnackbarContent\r\n        className={clsx(classes[status], className)}\r\n        message={messageTemplate}\r\n        action={[\r\n          <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\r\n            <CloseIcon className={classes.icon} />\r\n          </IconButton>,\r\n        ]}\r\n      />\r\n    </Snackbar>\r\n  );\r\n};\r\n\r\nNotification.SUCCESS = 'success';\r\nNotification.ERROR = 'error';\r\nNotification.INFO = 'info';\r\n\r\nNotification.propTypes = {\r\n  classes: PropTypes.shape({\r\n    message: PropTypes.string.isRequired,\r\n    icon: PropTypes.string.isRequired,\r\n    iconStatus: PropTypes.string.isRequired,\r\n    error: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  className: PropTypes.string,\r\n  status: PropTypes.oneOf([Notification.SUCCESS, Notification.ERROR, Notification.INFO]),\r\n  message: PropTypes.string,\r\n  onClose: PropTypes.func,\r\n};\r\n\r\nNotification.defaultProps = {\r\n  message: null,\r\n  status: null,\r\n  className: '',\r\n  onClose: () => {},\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(Notification);\r\n","export const getKeycloakToken = () => {\r\n  if (\r\n    window &&\r\n    window.entando &&\r\n    window.entando.keycloak &&\r\n    window.entando.keycloak.authenticated\r\n  ) {\r\n    return window.entando.keycloak.token;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const getDefaultOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/json',\r\n  }),\r\n});\r\n\r\nexport const getUrl = (url, filters = '', pagination = '') => {\r\n  const hasQuery = !!(filters || pagination);\r\n  const parameters = `${filters}${filters ? '&' : ''}${pagination}`;\r\n  return `${url}${hasQuery ? `?${parameters}` : ''}`;\r\n};\r\n\r\nexport const request = async (url, options) => {\r\n  const response = await fetch(url, options);\r\n\r\n  const headers = {\r\n    ...(response.headers.has('X-Total-Count')\r\n      ? { 'X-Total-Count': parseInt(response.headers.get('X-Total-Count'), 10) }\r\n      : {}),\r\n  };\r\n\r\n  if (response.status === 204) {\r\n    return { tickets: '' };\r\n  }\r\n\r\n  return response.status >= 200 && response.status < 300\r\n    ? { tickets: await response.json(), headers }\r\n    : Promise.reject(new Error(response.statusText || response.status));\r\n};\r\n","import { getFilterQuery } from 'components/filters/utils';\r\nimport { getDefaultOptions, request, getUrl } from 'api/helpers';\r\n\r\nconst resource = 'api/tickets';\r\n\r\nexport const apiTicketsDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketsGet = async (serviceUrl, { filters = [], pagination, mode }) => {\r\n  const filterQuery = getFilterQuery(filters);\r\n  const paginationQuery = pagination\r\n    ? `page=${pagination.page}&size=${pagination.rowsPerPage}`\r\n    : '';\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}${mode === 'count' ? '/count' : ''}`,\r\n    filterQuery,\r\n    paginationQuery\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","export const INPUT_EVENT_TYPES = {\r\n  formUpdate: 'ticket.form.update',\r\n  formCreate: 'ticket.form.create',\r\n  formDelete: 'ticket.form.delete',\r\n};\r\n\r\nexport const OUTPUT_EVENT_TYPES = {\r\n  select: 'ticket.table.select',\r\n  add: 'ticket.table.add',\r\n  error: 'ticket.table.error',\r\n  delete: 'ticket.table.delete',\r\n};\r\n\r\nexport const KEYCLOAK_EVENT_TYPE = 'keycloak';\r\n","export const ADD_FILTER = 'ticket-filter/addFilter';\r\nexport const UPDATE_FILTER = 'ticket-filter/updateFilter';\r\nexport const DELETE_FILTER = 'ticket-filter/deleteFilter';\r\nexport const CLEAR_FILTERS = 'ticket-filter/clearFilters';\r\n","export const READ_ALL = 'ticket-table/readAll';\r\nexport const ERROR_FETCH = 'ticket-table/error';\r\nexport const CLEAR_ERRORS = 'ticket-table/clearErrors';\r\nexport const CLEAR_ITEMS = 'ticket-table/clearItems';\r\nexport const CREATE = 'ticket-table/create';\r\nexport const UPDATE = 'ticket-table/update';\r\nexport const DELETE = 'ticket-table/delete';\r\n","import { INPUT_EVENT_TYPES } from 'custom-elements/widgetEventTypes';\r\nimport { ADD_FILTER, UPDATE_FILTER, DELETE_FILTER, CLEAR_FILTERS } from 'state/filter.types';\r\nimport {\r\n  READ_ALL,\r\n  ERROR_FETCH,\r\n  CLEAR_ERRORS,\r\n  CLEAR_ITEMS,\r\n  CREATE,\r\n  UPDATE,\r\n  DELETE,\r\n} from 'state/ticket.types';\r\n\r\nexport const initialState = {\r\n  filters: [],\r\n  items: [],\r\n  count: 0,\r\n  notificationMessage: null,\r\n  notificationStatus: null,\r\n  loading: false,\r\n};\r\n\r\nexport const reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_FILTER:\r\n      return {\r\n        ...state,\r\n        filters: [...state.filters, { field: '', operator: '', value: '' }],\r\n      };\r\n    case UPDATE_FILTER:\r\n      return {\r\n        ...state,\r\n        filters: state.filters.map((filter, index) =>\r\n          index === action.payload.filterId ? { ...filter, ...action.payload.values } : filter\r\n        ),\r\n      };\r\n    case DELETE_FILTER:\r\n      return {\r\n        ...state,\r\n        items: initialState.items,\r\n        count: initialState.count,\r\n        filters: state.filters.filter((f, index) => index !== action.payload.filterId),\r\n      };\r\n    case CLEAR_FILTERS:\r\n      return {\r\n        ...state,\r\n        items: initialState.items,\r\n        count: initialState.count,\r\n        filters: initialState.filters,\r\n      };\r\n    case CLEAR_ITEMS:\r\n      return {\r\n        ...state,\r\n        items: initialState.items,\r\n        count: initialState.count,\r\n      };\r\n    case READ_ALL:\r\n      return {\r\n        ...state,\r\n        items: action.payload.items,\r\n        count: action.payload.count,\r\n      };\r\n    case ERROR_FETCH:\r\n      return {\r\n        ...state,\r\n        notificationMessage: action.payload.message,\r\n        notificationStatus: action.payload.status,\r\n      };\r\n    case CLEAR_ERRORS:\r\n      return {\r\n        ...state,\r\n        notificationMessage: null,\r\n      };\r\n    case CREATE:\r\n    case INPUT_EVENT_TYPES.formCreate:\r\n      return { ...state, items: [...state.items, action.payload] };\r\n    case UPDATE:\r\n    case INPUT_EVENT_TYPES.formUpdate: {\r\n      const i = state.items.findIndex(item => {\r\n        return item.id === action.payload.id;\r\n      });\r\n      const items = [...state.items];\r\n      items[i] = action.payload;\r\n      return { ...state, items };\r\n    }\r\n    case DELETE:\r\n    case INPUT_EVENT_TYPES.formDelete:\r\n      return { ...state, items: state.items.filter(item => item.id !== action.payload.id) };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport { Fab } from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteForever from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nimport keycloakType from 'components/__types__/keycloak';\r\nimport withKeycloak from 'auth/withKeycloak';\r\nimport { AuthenticatedView, UnauthenticatedView } from 'auth/KeycloakViews';\r\nimport ConfirmationDialogTrigger from 'components/common/ConfirmationDialogTrigger';\r\nimport PaginationWrapper from 'components/pagination/PaginationWrapper';\r\nimport withPagination from 'components/pagination/withPagination';\r\nimport FiltersContainer from 'components/filters/FiltersContainer';\r\nimport TicketTable from 'components/TicketTable';\r\nimport Notification from 'components/common/Notification';\r\nimport { apiTicketsGet, apiTicketsDelete } from 'api/tickets';\r\nimport { reducer, initialState } from 'state/ticket.reducer';\r\nimport { ADD_FILTER, UPDATE_FILTER, DELETE_FILTER, CLEAR_FILTERS } from 'state/filter.types';\r\nimport { DELETE, ERROR_FETCH, CLEAR_ERRORS, READ_ALL, CLEAR_ITEMS } from 'state/ticket.types';\r\n\r\nconst styles = {\r\n  fab: {\r\n    float: 'right',\r\n  },\r\n  tableWrapper: {\r\n    width: '100%',\r\n    overflowX: 'auto',\r\n    overflowY: 'hidden',\r\n  },\r\n};\r\n\r\nclass TicketTableContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = initialState;\r\n\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n    this.handleError = this.handleError.bind(this);\r\n    this.closeNotification = this.closeNotification.bind(this);\r\n    this.fetchData = this.fetchData.bind(this);\r\n    this.updateFilter = this.updateFilter.bind(this);\r\n    this.addFilter = this.addFilter.bind(this);\r\n    this.removeFilter = this.removeFilter.bind(this);\r\n    this.clearFilters = this.clearFilters.bind(this);\r\n    this.applyFilters = this.applyFilters.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak, paginationMode, pagination } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    const changedPagination =\r\n      ['pagination', 'infinite-scroll'].includes(paginationMode) &&\r\n      (prevProps.pagination.currentPage !== pagination.currentPage ||\r\n        prevProps.pagination.itemsPerPage !== pagination.itemsPerPage);\r\n\r\n    if (authenticated && (changedAuth || changedPagination)) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  dispatch(action, afterSetState = () => {}) {\r\n    this.setState(prevState => reducer(prevState, action), afterSetState);\r\n  }\r\n\r\n  async fetchData() {\r\n    const { filters, items } = this.state;\r\n    const { keycloak, paginationMode, pagination, serviceUrl } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      try {\r\n        const requestParameters = {\r\n          filters,\r\n          ...(paginationMode === ''\r\n            ? {}\r\n            : {\r\n                pagination: {\r\n                  page: pagination.currentPage,\r\n                  rowsPerPage: pagination.itemsPerPage,\r\n                },\r\n              }),\r\n        };\r\n\r\n        const { tickets, headers } = await apiTicketsGet(serviceUrl, requestParameters);\r\n        const ticketCount = (headers && headers['X-Total-Count']) || 0;\r\n\r\n        this.dispatch({\r\n          type: READ_ALL,\r\n          payload: {\r\n            items: paginationMode === 'infinite-scroll' ? [...items, ...tickets] : tickets,\r\n            count: ticketCount,\r\n          },\r\n        });\r\n      } catch (err) {\r\n        this.handleError(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateFilter(filterId, values) {\r\n    this.dispatch({ type: UPDATE_FILTER, payload: { values, filterId } });\r\n  }\r\n\r\n  addFilter() {\r\n    this.dispatch({ type: ADD_FILTER });\r\n  }\r\n\r\n  removeFilter(filterId) {\r\n    this.dispatch({ type: DELETE_FILTER, payload: { filterId } }, this.fetchData);\r\n  }\r\n\r\n  clearFilters() {\r\n    this.dispatch({ type: CLEAR_FILTERS }, this.fetchData);\r\n  }\r\n\r\n  applyFilters() {\r\n    this.dispatch({ type: CLEAR_ITEMS }, this.fetchData);\r\n  }\r\n\r\n  closeNotification() {\r\n    this.dispatch({ type: CLEAR_ERRORS });\r\n  }\r\n\r\n  handleError(err) {\r\n    const { onError, t } = this.props;\r\n    onError(err);\r\n    this.dispatch({\r\n      type: ERROR_FETCH,\r\n      payload: {\r\n        notificationMessage: t('error.dataLoading'),\r\n        notificationStatus: Notification.ERROR,\r\n      },\r\n    });\r\n  }\r\n\r\n  async handleDelete(item) {\r\n    const { t, onDelete, keycloak, serviceUrl } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      try {\r\n        await apiTicketsDelete(serviceUrl, item.id);\r\n        onDelete(item);\r\n        this.dispatch({ type: DELETE, payload: { id: item.id } });\r\n        this.setState({\r\n          notificationMessage: t('common.dataDeleted'),\r\n          notificationStatus: Notification.SUCCESS,\r\n        });\r\n      } catch (err) {\r\n        this.handleError(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleConfirmationDialogAction(action, item) {\r\n    switch (action) {\r\n      case ConfirmationDialogTrigger.CONFIRM: {\r\n        this.handleDelete(item);\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { items, count, notificationMessage, notificationStatus, filters } = this.state;\r\n    const { classes, onSelect, onAdd, onDelete, t, keycloak, paginationMode = '' } = this.props;\r\n    const deleteLabel = t('common.delete');\r\n\r\n    const Actions = ({ item }) =>\r\n      onDelete ? (\r\n        <ConfirmationDialogTrigger\r\n          onCloseDialog={action => this.handleConfirmationDialogAction(action, item)}\r\n          dialog={{\r\n            title: t('entities.ticket.deleteDialog.title'),\r\n            description: t('entities.ticket.deleteDialog.description'),\r\n            confirmLabel: t('common.yes'),\r\n            discardLabel: t('common.no'),\r\n          }}\r\n          Renderer={({ onClick }) => (\r\n            <IconButton aria-label={deleteLabel} title={deleteLabel} onClick={onClick}>\r\n              <DeleteForever />\r\n            </IconButton>\r\n          )}\r\n        />\r\n      ) : (\r\n        ''\r\n      );\r\n\r\n    return (\r\n      <>\r\n        <UnauthenticatedView keycloak={keycloak}>\r\n          {t('common.notAuthenticated')}\r\n        </UnauthenticatedView>\r\n        <AuthenticatedView keycloak={keycloak}>\r\n          <Fab color=\"primary\" aria-label=\"add\" className={classes.fab} onClick={onAdd}>\r\n            <AddIcon />\r\n          </Fab>\r\n          <FiltersContainer\r\n            applyFilter={this.applyFilters}\r\n            add={this.addFilter}\r\n            update={this.updateFilter}\r\n            remove={this.removeFilter}\r\n            clear={this.clearFilters}\r\n            filters={filters}\r\n            error={this.handleError}\r\n          />\r\n          <PaginationWrapper items={items} paginationMode={paginationMode} count={count}>\r\n            <div className={classes.tableWrapper}>\r\n              <TicketTable items={items} onSelect={onSelect} Actions={Actions} />\r\n            </div>\r\n          </PaginationWrapper>\r\n        </AuthenticatedView>\r\n        <Notification\r\n          status={notificationStatus}\r\n          message={notificationMessage}\r\n          onClose={this.closeNotification}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nTicketTableContainer.propTypes = {\r\n  classes: PropTypes.shape({\r\n    fab: PropTypes.string,\r\n    tableWrapper: PropTypes.string,\r\n  }).isRequired,\r\n  onAdd: PropTypes.func,\r\n  onError: PropTypes.func,\r\n  onSelect: PropTypes.func,\r\n  onDelete: PropTypes.func,\r\n  t: PropTypes.func.isRequired,\r\n  keycloak: keycloakType.isRequired,\r\n  paginationMode: PropTypes.string,\r\n  pagination: PropTypes.shape({\r\n    currentPage: PropTypes.number,\r\n    itemsPerPage: PropTypes.number,\r\n  }),\r\n  serviceUrl: PropTypes.string,\r\n};\r\n\r\nTicketTableContainer.defaultProps = {\r\n  onAdd: () => {},\r\n  onDelete: () => {},\r\n  onError: () => {},\r\n  onSelect: () => {},\r\n  paginationMode: '',\r\n  pagination: null,\r\n  serviceUrl: '',\r\n};\r\n\r\nexport default withKeycloak(\r\n  withStyles(styles)(\r\n    withTranslation(undefined, { withRef: true })(withPagination(TicketTableContainer))\r\n  )\r\n);\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { forwardRef, Component } from 'react';\r\nimport refType from 'components/__types__/ref';\r\nimport KeycloakContext from 'auth/KeycloakContext';\r\n\r\nexport default function withKeycloak(WrappedComponent) {\r\n  class WithKeycloakComponent extends Component {\r\n    renderWrappedComponent = value => {\r\n      const { forwardedRef, ...rest } = this.props;\r\n      return <WrappedComponent {...rest} ref={forwardedRef} keycloak={value} />;\r\n    };\r\n\r\n    render() {\r\n      return <KeycloakContext.Consumer>{this.renderWrappedComponent}</KeycloakContext.Consumer>;\r\n    }\r\n  }\r\n\r\n  WithKeycloakComponent.propTypes = {\r\n    forwardedRef: refType,\r\n  };\r\n\r\n  WithKeycloakComponent.defaultProps = {\r\n    forwardedRef: () => {},\r\n  };\r\n\r\n  return forwardRef((props, ref) => <WithKeycloakComponent {...props} forwardedRef={ref} />);\r\n}\r\n","import en from 'i18n/locales/en.json';\r\n\r\nexport default {\r\n  en,\r\n};\r\n","import i18next from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\n\r\nimport locales from 'i18n/locales';\r\n\r\nconst defaultNs = 'translation';\r\n\r\n// adds the default namespace ('translation') to resources object per i18next documentation\r\nconst resources = Object.keys(locales).reduce(\r\n  (acc, lang) => ({ ...acc, [lang]: { [defaultNs]: locales[lang] } }),\r\n  {}\r\n);\r\n\r\nexport const translateFn = i18next.t;\r\n\r\nexport const setI18nextLocale = (locale, defaultLocale) => {\r\n  i18next.use(initReactI18next).init({\r\n    defaultNs,\r\n    interpolation: {\r\n      escapeValue: false,\r\n    },\r\n    resources,\r\n    lng: locale || defaultLocale,\r\n    fallbackLng: defaultLocale,\r\n    react: { useSuspense: false },\r\n  });\r\n};\r\n","import { DEFAULT_LOCALE } from 'i18n/constants';\r\nimport { setI18nextLocale } from 'i18n/i18next';\r\n\r\nexport default locale => {\r\n  setI18nextLocale(locale, DEFAULT_LOCALE);\r\n};\r\n","/* eslint-disable-next-line import/prefer-default-export */\r\nexport const DEFAULT_LOCALE = 'en';\r\n","export const publishWidgetEvent = (eventId, payload) => {\r\n  const widgetEvent = new CustomEvent(eventId, {\r\n    detail: {\r\n      payload,\r\n    },\r\n  });\r\n  window.dispatchEvent(widgetEvent);\r\n};\r\n\r\nexport const createWidgetEventPublisher = eventType => payload =>\r\n  publishWidgetEvent(eventType, payload);\r\n\r\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\r\n  window.addEventListener(eventType, eventHandler);\r\n\r\n  return () => {\r\n    window.removeEventListener(eventType, eventHandler);\r\n  };\r\n};\r\n\r\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\r\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\r\n\r\n  return () => {\r\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\r\n  };\r\n};\r\n\r\nexport const widgetEventToFSA = widgetEvent => {\r\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\r\n  const {\r\n    type,\r\n    detail: { payload, error, meta },\r\n  } = widgetEvent;\r\n  return { type, payload, error, meta };\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport retargetEvents from 'react-shadow-dom-retarget-events';\r\n\r\nimport { StylesProvider, jssPreset, createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport { create } from 'jss';\r\n\r\nimport KeycloakContext from 'auth/KeycloakContext';\r\nimport { PaginationProvider } from 'components/pagination/PaginationContext';\r\nimport TicketTableContainer from 'components/TicketTableContainer';\r\nimport setLocale from 'i18n/setLocale';\r\nimport {\r\n  createWidgetEventPublisher,\r\n  subscribeToWidgetEvents,\r\n  subscribeToWidgetEvent,\r\n  widgetEventToFSA,\r\n} from 'helpers/widgetEvents';\r\nimport {\r\n  INPUT_EVENT_TYPES,\r\n  OUTPUT_EVENT_TYPES,\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from 'custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketTableElement extends HTMLElement {\r\n  muiTheme;\r\n\r\n  jss;\r\n\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromWidgetEvents;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  defaultEventHandlerDisabled;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  onAdd = createWidgetEventPublisher(OUTPUT_EVENT_TYPES.add);\r\n\r\n  onError = createWidgetEventPublisher(OUTPUT_EVENT_TYPES.error);\r\n\r\n  onSelect = createWidgetEventPublisher(OUTPUT_EVENT_TYPES.select);\r\n\r\n  onDelete = createWidgetEventPublisher(OUTPUT_EVENT_TYPES.delete);\r\n\r\n  reactRootRef = React.createRef();\r\n\r\n  static get observedAttributes() {\r\n    return Object.values(ATTRIBUTES);\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (!this.container || oldValue === newValue) {\r\n      return;\r\n    }\r\n    if (!Object.values(ATTRIBUTES).includes(name)) {\r\n      throw new Error(`Untracked changed attribute: ${name}`);\r\n    }\r\n\r\n    if (name === ATTRIBUTES.disableDefaultEventHandler) {\r\n      this.onToggleDisableDefaultEvent();\r\n    }\r\n\r\n    this.render();\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.container = document.createElement('div');\r\n    this.mountPoint = document.createElement('div');\r\n    this.container.appendChild(this.mountPoint);\r\n\r\n    const shadowRoot = this.attachShadow({ mode: 'open' });\r\n    shadowRoot.appendChild(this.container);\r\n\r\n    this.jss = create({\r\n      ...jssPreset(),\r\n      insertionPoint: this.container,\r\n    });\r\n\r\n    this.muiTheme = createMuiTheme({\r\n      props: {\r\n        MuiDialog: {\r\n          container: this.mountPoint,\r\n        },\r\n      },\r\n    });\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.onToggleDisableDefaultEvent();\r\n\r\n    this.render();\r\n\r\n    retargetEvents(shadowRoot);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.unsubscribeFromWidgetEvents) {\r\n      this.unsubscribeFromWidgetEvents();\r\n    }\r\n    if (this.unsubscribeFromKeycloakEvent) {\r\n      this.unsubscribeFromKeycloakEvent();\r\n    }\r\n  }\r\n\r\n  defaultWidgetEventHandler() {\r\n    return evt => {\r\n      const action = widgetEventToFSA(evt);\r\n      this.reactRootRef.current.dispatch(action);\r\n    };\r\n  }\r\n\r\n  onToggleDisableDefaultEvent() {\r\n    const disableEventHandler = this.getAttribute(ATTRIBUTES.disableDefaultEventHandler) === 'true';\r\n\r\n    if (disableEventHandler !== this.defaultEventHandlerDisabled) {\r\n      if (!disableEventHandler) {\r\n        const defaultWidgetEventHandler = this.defaultWidgetEventHandler();\r\n\r\n        this.unsubscribeFromWidgetEvents = subscribeToWidgetEvents(\r\n          Object.values(INPUT_EVENT_TYPES),\r\n          defaultWidgetEventHandler\r\n        );\r\n      } else {\r\n        if (this.unsubscribeFromWidgetEvents) {\r\n          this.unsubscribeFromWidgetEvents();\r\n        }\r\n        if (this.unsubscribeFromKeycloakEvent) {\r\n          this.unsubscribeFromKeycloakEvent();\r\n        }\r\n      }\r\n      this.defaultEventHandlerDisabled = disableEventHandler;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const hidden = this.getAttribute(ATTRIBUTES.hidden) === 'true';\r\n    if (hidden) {\r\n      return;\r\n    }\r\n\r\n    const locale = this.getAttribute(ATTRIBUTES.locale);\r\n    setLocale(locale);\r\n\r\n    const paginationMode = this.getAttribute(ATTRIBUTES.paginationMode) || '';\r\n\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <StylesProvider jss={this.jss}>\r\n          <ThemeProvider theme={this.muiTheme}>\r\n            <PaginationProvider paginationMode={paginationMode}>\r\n              <TicketTableContainer\r\n                ref={this.reactRootRef}\r\n                onAdd={this.onAdd}\r\n                onDelete={this.onDelete}\r\n                onSelect={this.onSelect}\r\n                onError={this.onError}\r\n                paginationMode={paginationMode}\r\n                serviceUrl={serviceUrl}\r\n              />\r\n            </PaginationProvider>\r\n          </ThemeProvider>\r\n        </StylesProvider>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticket-table', TicketTableElement);\r\n"],"sourceRoot":""}